<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">



<title>å®¹å™¨ç»´æŠ¤ | K&#39;s Blog</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 4.2.0"></head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">nimingkun&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">nimingkun&#39;s Blog</a><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">å®¹å™¨ç»´æŠ¤</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">nmk</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">2020-7-30&nbsp;&nbsp;23:40:00</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/category/deployment/">deployment</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <p>æŸ¥çœ‹é›†ç¾¤</p>
<p>å›¾ä¸­æœ‰ä¸‰ä¸ªé›†ç¾¤,é›†ç¾¤åŒºåŸŸä¸ºååŒ—2 çŠ¶æ€è¿è¡Œä¸­,èŠ‚ç‚¹æ•°ä¸ºæ¯ä¸ªé›†ç¾¤çš„workeræ•°.<br><img src="http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-15/5f0e9d826971d.png" alt=""></p>
<details>
<summary>é›†ç¾¤æ‰©å®¹</summary>
é€‰æ‹© æ›´å¤š>é›†ç¾¤æ‰©å®¹ æ¥ä¸ºé›†ç¾¤æ‰©å®¹èŠ‚ç‚¹
ä¹Ÿå¯é€‰æ‹© æ›´å¤š>æ·»åŠ å·²æœ‰èŠ‚ç‚¹ æ¥æ‰©å®¹(æŠŠecsæ·»åŠ åˆ°é›†ç¾¤)
![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-15/5f0e9e447e472.png)
é€‰æ‹© ä¸“æœ‰ç½‘ç»œå’Œäº¤æ¢æœº ä»˜è´¹æ–¹å¼
![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-15/5f0e9ecc9358f.png)
é€‰æ‹©æ‰©å®¹èŠ‚ç‚¹æ•°å’Œè§„æ ¼(è§„æ ¼>å†…å­˜å‹>ecs.r5.xlarge)  è®¾ç½®å¯†ç æäº¤å³å¯
![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-15/5f0ea01d29a2e.png)</details>

<h4 id="èŠ‚ç‚¹è¯¦æƒ…"><a href="#èŠ‚ç‚¹è¯¦æƒ…" class="headerlink" title="èŠ‚ç‚¹è¯¦æƒ…"></a>èŠ‚ç‚¹è¯¦æƒ…</h4><p>å›¾ä¸­testé›†ç¾¤æœ‰ä¸¤ä¸ªworkerèŠ‚ç‚¹,å¯æŸ¥çœ‹å¯¹åº”çš„ipåœ°å€ è®¡è´¹æ–¹å¼ å†…å­˜å¤§å° åˆ°æœŸæ—¶é—´ å†…å­˜CPUä½¿ç”¨<br>å¦‚éœ€æ›´ç»†å¾®çš„ç›‘æ§,è¯·ç‚¹å‡»å³è¾¹çš„ç›‘æ§å¯æŸ¥çœ‹è´Ÿè½½ç½‘ç»œç­‰æƒ…å†µ<br>ç§»é™¤workerèŠ‚ç‚¹ï¼šæ›´å¤š&gt;ç§»é™¤ å³å¯,å¦‚éœ€æ‰¹é‡ç§»é™¤,è¯·å‹¾é€‰workerèŠ‚ç‚¹çš„é€‰é¡¹,ç‚¹å‡»æ‰¹é‡ç§»é™¤å³å¯<br><img src="http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fb71a27871.png" alt=""></p>
<h4 id="æ— çŠ¶æ€"><a href="#æ— çŠ¶æ€" class="headerlink" title="æ— çŠ¶æ€"></a>æ— çŠ¶æ€</h4><p>å¯æŸ¥çœ‹åº”ç”¨æ•°é‡,å®¹å™¨æ•°é‡æ˜¾ç¤ºåº”ç”¨çš„èŠ‚ç‚¹æ•°å’ŒçŠ¶æ€<br>ğŸŒ°ä¸¾ä¾‹:1/1ä»£è¡¨1ä¸ªèŠ‚ç‚¹å¯åŠ¨æˆåŠŸ.0/1ä»£è¡¨1ä¸ªèŠ‚ç‚¹ä½†å¯åŠ¨å¤±è´¥.1/2ä»£è¡¨2ä¸ªèŠ‚ç‚¹ä½†åªæœ‰ä¸€ä¸ªå¯åŠ¨æˆåŠŸ<br><img src="http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fb998b34c9.png" alt=""></p>
<details>
  <summary>ğŸ’ğŸ»<font color="blue">è¯¦æƒ…</font></summary>
æŸ¥çœ‹åº”ç”¨åç§°,åº”ç”¨çš„æ¥æº(é•œåƒä»“åº“åœ°å€),åº”ç”¨çš„çŠ¶æ€,podçš„ip,podæ‰€åœ¨workerçš„ip åˆ›å»ºæ—¶é—´![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fbb19e1c65.png)
ğŸ”<font color="blue">è¯¦æƒ…</font>
æŸ¥çœ‹è¯¥åº”ç”¨æ‰€åœ¨podçš„èµ„æºæƒ…å†µ
![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fbc63e18cb.png)
ğŸ“‹<font color="blue">æ—¥å¿—</font>
é€‰æ‹©æ˜¾ç¤ºçš„è¡Œæ•°,æ˜¯å¦è‡ªåŠ¨åˆ·æ–°æ—¥å¿—,å¯ä¸‹è½½æ—¥å¿—æ–‡ä»¶
![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fbcb40601f.png)
âš™ï¸<font color="blue">æ›´å¤š</font>
ç¼–è¾‘å¯æŸ¥çœ‹è¯¥åº”ç”¨çš„yamlæ–‡ä»¶ ç»ˆç«¯å¯è¿æ¥åˆ°podé‡Œè¿›è¡Œæ“ä½œ åˆ é™¤å¯åˆ é™¤å½“å‰çš„pod,ä½†ä¼šè‡ªåŠ¨å†åˆ›å»ºä¸€ä¸ª
![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fbd389d876.png)
ğŸšªè®¿é—®æ–¹å¼
å¯æŸ¥çœ‹å’Œç¼–è¾‘ æœåŠ¡ä»£è¡¨podå¯¹å¤–æ˜ å°„çš„ç«¯å£ è·¯ç”±ä»£è¡¨è¿›æ¥çš„åŸŸååœ°å€è½¬å‘åˆ°podé‡Œçš„åº”ç”¨åœ°å€
![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fbfd4236f2.png)
ğŸ›å®¹å™¨æ°´å¹³ä¼¸ç¼©å™¨
å¯æŒ‰ç…§è§„åˆ™è¿›è¡Œè‡ªåŠ¨çš„æ‰©å®¹å’Œå‡å°‘èŠ‚ç‚¹æ•° æœ€å°å‰¯æœ¬å†³å®šè¯¥åº”ç”¨çš„æœ€å°èŠ‚ç‚¹æ•°
![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fbfe8106a7.png)
ğŸ“·å†å²ç‰ˆæœ¬
å‡ºç°é—®é¢˜æ—¶å¯ä½¿ç”¨è¿›è¡Œå›æ»š(è¿ç»´é…ç½®è¯¥å›æ»šæœ‰ç‚¹é—®é¢˜,è¯·å‹¿ä½¿ç”¨)
![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fc088499a1.png)
ğŸ§­è§¦å‘å™¨
ä¸å®¹å™¨é•œåƒæœåŠ¡çš„è§¦å‘å™¨ç›¸å¯¹åº”,æ£€æµ‹åˆ°é•œåƒå˜åŒ–åˆ™æ›´æ–°åº”ç”¨
![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fc154cd697.png)
</details>


<details>
    <summary>ğŸ’ğŸ»<font color="blue">ç¼–è¾‘</font></summary>
**é•œåƒåç§°**: é•œåƒä»“åº“åœ°å€
**é•œåƒTag**: é•œåƒçš„ç‰ˆæœ¬
**æ€»æ˜¯æ‹‰å–é•œåƒ**: å½“å‡ºç°åˆ é™¤æˆ–æ‰©å®¹æ—¶æ‹‰å–é•œåƒ
**æ‰€éœ€èµ„æº**: å®šä¹‰çš„podå†…å­˜å’Œcpu
**èµ„æºé™åˆ¶**: podå…±äº«çš„å†…å­˜å’Œcpu (æ­¤ä¸ºpodçš„æœ€å¤§å†…å­˜å’Œcpuå€¼)
![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fc613da038.png)
å­˜æ´»æ£€æŸ¥
å°±ç»ªæ£€æŸ¥
![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fc70509928.png)
æŒ‚è½½ç›®å½•åˆ°workerèŠ‚ç‚¹(å½“podé‡å¯æ—¶,å¯¹åº”ç›®å½•çš„æ•°æ®ä¼šä¿ç•™)
![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fc7d588040.png)
</details>

<details>
    <summary>ğŸ’ğŸ»<font color="blue">ä¼¸ç¼©</font></summary>
å¯å¢åŠ å’Œå‡å°‘å½“å‰åº”ç”¨çš„èŠ‚ç‚¹æ•°(âš ï¸<font color="red">å½“é…ç½®å®¹å™¨ä¼¸ç¼©æ°´å¹³æ—¶,å½“å‰æ­¤é…ç½®æ— æ•ˆ</font>)
![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fc3fe369c2.png)
</details>

<details>
    <summary>ğŸ’ğŸ»<font color="blue">ç›‘æ§</font></summary>
å¯æŸ¥çœ‹åº”ç”¨æ‰€åœ¨å®¹å™¨çš„ç›‘æ§,<font color="red">åˆ†ç»„</font>ä¸ºæ•´ä¸ªç»„çš„èµ„æºä½¿ç”¨,<font color="red">å®ä¾‹</font>å¯æŸ¥çœ‹å•ä¸ªèŠ‚ç‚¹çš„èµ„æºä½¿ç”¨
![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fc3a3b9692.png)
</details>

<details>
    <summary>ğŸ’ğŸ»<font color="blue">æ›´å¤š</font></summary>
å¯æŸ¥çœ‹yamlæ–‡ä»¶,é‡æ–°éƒ¨ç½²åº”ç”¨,å›æ»šåˆ°ç›¸åº”ç‰ˆæœ¬,åˆ é™¤åº”ç”¨
![](http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fc33ab80b4.png)
</details>

<h4 id="æœåŠ¡"><a href="#æœåŠ¡" class="headerlink" title="æœåŠ¡"></a>æœåŠ¡</h4><p><strong>åç§°</strong>: è‡ªå®šä¹‰(åº”ç”¨åå³å¯)<br><strong>å…³è”</strong>: åº”ç”¨çš„çš„æ— çŠ¶æ€åç§°<br><strong>ç«¯å£æ˜ å°„</strong>: éœ€è¦å¤–æ”¾çš„ç«¯å£<br><img src="http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fee1759024.png" alt=""></p>
<h4 id="è·¯ç”±"><a href="#è·¯ç”±" class="headerlink" title="è·¯ç”±"></a>è·¯ç”±</h4><p><strong>åç§°</strong>: è‡ªå®šä¹‰(å¯å¡«å†™åŸŸååç§°)<br><strong>åŸŸå</strong>: åŸŸå(tdev.gzlplink.com)<br><strong>è·¯å¾„</strong>: è¦è®¿é—®çš„åœ°å€(å¦‚/api)<br><strong>æœåŠ¡</strong>: é€‰æ‹©æœåŠ¡å¯¹åº”çš„å®¹å™¨å<br>å‹¾é€‰å¼€å¯TLS,ä½¿ç”¨å¯†é’¥,æ—¢å¯ä½¿ç”¨https,å¦‚æœªæœ‰å¯†é’¥å¯ç‚¹å‡»æ–°å»ºå¯†é’¥è¿›è¡Œåˆ›å»º<br><img src="http://showdoc.gzlplink.com/server/../Public/Uploads/2020-07-16/5f0fefc2ea532.png" alt=""></p>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>nmk</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="http://nmk0718.github.io/2020/07/30/%E5%AE%B9%E5%99%A8%E7%BB%B4%E6%8A%A4/">http://nmk0718.github.io/2020/07/30/%E5%AE%B9%E5%99%A8%E7%BB%B4%E6%8A%A4/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2020 <a href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tag/k8s/"># k8s</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>Â· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
            
            <a class="next" rel="next" href="/2020/07/30/elasticsearch/">elasticsearch</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>Â© nmk | Powered by <a href="https://hexo.io" target="_blank">Hexo</a></span>
	</div>
</footer>

    </div>
</body>
</html>
